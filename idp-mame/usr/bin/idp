#!/bin/bash

# Check if at least one argument is provided
if [ $# -lt 1 ]; then
  echo "Usage: $0 <model> [additional mame options]"
  exit 1
fi

# First argument: Computer model name
model="$1"
shift  # Remove the first argument, so $@ contains additional parameters

# Initialize variables
rom=""
disk=""
diskarg=""
shader="crt-geom"  # Default shader for CRT effect

# Determine the ROM and disk to use based on the computer model
case $model in
    wfg)
        rom="partnerwfg"
        diskarg="-hard1"
        disk="wfg-hdd.chd"
        ;;
    fg)
        rom="partner1fg"
        diskarg="-flop1"
        disk="fg-fdd.img"
        ;;
    wf)
        rom="partnerw"
        diskarg="-hard1"
        disk="wf-hdd.chd"
        ;;
    f)
        rom="partnerf"
        diskarg="-flop1"
        disk="f-fdd.img"
        ;;
    *)
        echo "Invalid computer model. Please specify wfg, fg, f, or w."
        exit 1
        ;;
esac

# Run the ROM with the specified disk and any additional parameters
/usr/bin/idp-mame-run $rom -window -rompath /usr/share/idp-mame/roms/ $diskarg /usr/share/idp-mame/bootdisks/$disk -video bgfx -bgfx_screen_chains $shader "$@"
